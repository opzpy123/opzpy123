<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Blog</title>

    <link rel="stylesheet" href="/css/layui.css">
    <link href="/css/editormd.preview.min.css" rel="stylesheet">
    <link href="/css/editormd.min.css" rel="stylesheet"  >

    <script src="/js/jquery.min.js"></script>
    <script src="/js/layui.js"></script>
    <script src="/js/editormd.min.js"></script>
    <script src="/js/lib/marked.min.js"></script>
    <script src="/js/lib/prettify.min.js"></script>
</head>
<body class="layui-layout-body">
<div class="layui-layout layui-layout-admin">
    <div class="layui-header">
        <div class="layui-logo">Opzpy123</div>
        <!-- 头部区域（可配合layui已有的水平导航） -->
        <ul class="layui-nav layui-layout-left">
            <li class="layui-nav-item"><a href="/">个人博客</a></li>
            <li class="layui-nav-item"><a href="http://localhost:8080/">论坛</a></li>
        </ul>
        <!--        <ul class="layui-nav layui-layout-right">-->
        <!--            <li class="layui-nav-item">-->
        <!--                <a href="javascript:;">-->
        <!--                    <img src="http://t.cn/RCzsdCq" class="layui-nav-img">-->
        <!--                </a>-->
        <!--                <dl class="layui-nav-child">-->
        <!--                    <dd><a href="">基本资料</a></dd>-->
        <!--                    <dd><a href="">安全设置</a></dd>-->
        <!--                </dl>-->
        <!--            </li>-->
        <!--            <li class="layui-nav-item"><a href="">退了</a></li>-->
        <!--        </ul>-->
    </div>

    <div class="layui-side layui-bg-black" >
        <div class="layui-side-scroll">
            <!-- 左侧导航区域（可配合layui已有的垂直导航） -->
            <ul class="layui-nav layui-nav-tree"  lay-filter="test">
                <li class="layui-nav-item layui-nav-itemed">
                    <a class="" href="javascript:;">所有内容</a>
                    <dl class="layui-nav-child" th:each="blogTitle:${blog}">
                        <a onclick="f(this)" th:href="@{'/blog/'+${blogTitle.id}}" th:id="${blogTitle.id}" ><dd  th:text="${blogTitle.title}">列表一</dd></a>
                    </dl>
                </li>
            </ul>
        </div>
    </div>

    <div class="layui-body">
        <!-- 内容主体区域 -->
        <div style="padding: 15px;">
            <div class="col-12 " style="background-color: #f5f5f5;margin: 10px;padding: 2px" id="question-view" >
                <textarea id="textArea" style="display: none" th:text="${thisBlog.content}"></textarea>
            </div>
            <script type="text/javascript">
                $(function() {
                    var testView = editormd.markdownToHTML("question-view", {});
                });
            </script>
        </div>
    </div>

    <div class="layui-footer">
        <!-- 底部固定区域 -->
        © opzpy123.com
    </div>
</div>

<script src="../src/layui.js"></script>
<script>

    function f(e){
        var blogId = e.id;

        $.ajax({
            type: "get", // 对于controller的mapping
            url: "/blog/"+blogId, // 你的请求链接
            data: blogId,
            success(data) {
                // $("#textArea").val(data.content);
                $("#textArea").attr("value",data.content);
                console.log(data);
            }
        })

    }

    //JavaScript代码区域
    layui.use('element', function(){
        var element = layui.element;

    });

    //注意：导航 依赖 element 模块，否则无法进行功能性操作
    layui.use('element', function () {
        var element = layui.element;

        //…
    });
    $(function() {
        var editor = editormd("comment-editor", {
            width: "100%",
            height: "200px",
            path: "/js/lib/",
            delay: 0,
            watch: false,
            lineNumbers: false,
            imageUpload: true,
            imageFormats: ["jpg", "jpeg", "gif", "png", "bmp", "webp"],
            imageUploadURL: "/file/upload",
            placeholder: "请输入回复内容",
            toolbarIcons: function () {
                // Or return editormd.toolbarModes[name]; // full, simple, mini
                // Using "||" set icons align right.
                return ["undo", "redo", "|", "bold", "hr", "|", "preview", "watch", "|", "fullscreen", "info", "image"]
            },
        });
    });
</script>


</body>
</html>